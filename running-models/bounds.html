<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bounds - Forge Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../././mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../home.html">Home</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded affix "><li class="part-title">Building Models</li><li class="chapter-item expanded "><a href="../building-models/overview.html"><strong aria-hidden="true">2.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/alloy-user-overview.html"><strong aria-hidden="true">2.1.</strong> Addendum for Alloy Users</a></li></ol></li><li class="chapter-item expanded "><a href="../building-models/sigs/sigs.html"><strong aria-hidden="true">3.</strong> Sigs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/sigs/inheritance.html"><strong aria-hidden="true">3.1.</strong> Inheritance</a></li><li class="chapter-item expanded "><a href="../building-models/sigs/singleton-maybe-sigs.html"><strong aria-hidden="true">3.2.</strong> Singleton, Maybe, and Abstract Sigs</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Field Multiplicity</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> Field Types</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.</strong> Advanced</div></li></ol></li><li class="chapter-item expanded "><a href="../building-models/constraints/constraints.html"><strong aria-hidden="true">4.</strong> Constraints</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/formulas.html"><strong aria-hidden="true">4.1.</strong> Formulas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/operators.html"><strong aria-hidden="true">4.1.1.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/cardinality-membership.html"><strong aria-hidden="true">4.1.2.</strong> Cardinality and Membership</a></li><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/quantifiers.html"><strong aria-hidden="true">4.1.3.</strong> Quantifiers</a></li><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/predicates.html"><strong aria-hidden="true">4.1.4.</strong> Predicates</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.</strong> Expressions</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.</strong> Relational Expressions</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.1.</strong> Relational Join</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.2.</strong> Cross Product</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.3.</strong> Transpose</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.4.</strong> Transitive Closure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.5.</strong> Reflexive Transitive Closure</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.2.</strong> Functions</div></li><li class="chapter-item expanded "><a href="../building-models/constraints/expressions/let-expressions.html"><strong aria-hidden="true">4.2.3.</strong> Let-Expressions</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../building-models/comments.html"><strong aria-hidden="true">5.</strong> Comments</a></li><li class="chapter-item expanded affix "><li class="part-title">Running Models</li><li class="chapter-item expanded "><a href="../running-models/running.html"><strong aria-hidden="true">6.</strong> Running</a></li><li class="chapter-item expanded "><a href="../running-models/sterling-visualizer.html"><strong aria-hidden="true">7.</strong> Sterling Visualizer</a></li><li class="chapter-item expanded "><a href="../running-models/bounds.html" class="active"><strong aria-hidden="true">8.</strong> Bounds</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../running-models/concrete-instance-bounds.html"><strong aria-hidden="true">8.1.</strong> Concrete Instance Bounds</a></li></ol></li><li class="chapter-item expanded "><a href="../running-models/options.html"><strong aria-hidden="true">9.</strong> Options</a></li><li class="chapter-item expanded affix "><li class="part-title">Testing</li><li class="chapter-item expanded "><a href="../testing-chapter/testing.html"><strong aria-hidden="true">10.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../testing-chapter/wheats.html"><strong aria-hidden="true">11.</strong> Testing Against Wheats</a></li><li class="chapter-item expanded affix "><li class="part-title">Forge Standard Library (Built-Ins)</li><li class="chapter-item expanded "><a href="../forge-standard-library/integers.html"><strong aria-hidden="true">12.</strong> Integers</a></li><li class="chapter-item expanded "><a href="../forge-standard-library/constants-and-keywords.html"><strong aria-hidden="true">13.</strong> Constants & Keywords</a></li><li class="chapter-item expanded "><a href="../forge-standard-library/helpers.html"><strong aria-hidden="true">14.</strong> Helpers</a></li><li class="chapter-item expanded affix "><li class="part-title">Custom Visualizations</li><li class="chapter-item expanded "><a href="../sterling/custom-basics.html"><strong aria-hidden="true">15.</strong> Custom Visualization Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sterling/d3fx.html"><strong aria-hidden="true">15.1.</strong> D3FX Helpers</a></li><li class="chapter-item expanded "><a href="../sterling/svg-tips.html"><strong aria-hidden="true">15.2.</strong> Working with SVG and Imports</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Temporal Models (Electrum)</li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> Electrum Overview</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">17.</strong> Running & Examining Electrum Models</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Forge Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="bounds"><a class="header" href="#bounds">Bounds</a></h1>
<p>Forge is a <em>bounded</em> model finder, meaning it can only look for instances up to a certain bound. You can specify bounds in two seperate ways in Forge: using numeric bounds or instance bounds.</p>
<hr />
<h2 id="numeric-bounds"><a class="header" href="#numeric-bounds">Numeric bounds</a></h2>
<p>The most basic way of specifying bounds in Forge is providing a maximum number of objects for each <code>sig</code>. If no bound is specified, Forge defaults to allowing up to 4 of each <code>sig</code>. The default bound on <code>Int</code> is a <em>bitwidth</em> of 4 (16 integers total).</p>
<p>Numeric bounds can be provided explicitly per sig in a <code>run</code>, <code>assert</code>, etc. command by adding a trailing <code>for ...</code> after the constraint block (see <a href="running.html">Running</a>). </p>
<div id="admonition-applying-a-numeric-bound" class="admonition example">
<div class="admonition-title">
<p>Applying a numeric bound</p>
<p><a class="admonition-anchor-link" href="#admonition-applying-a-numeric-bound"></a></p>
</div>
<div>
<p>E.g., to add a bound to a <code>run</code> command in a model with <code>Cat</code> and <code>Dog</code> sigs, you would write something like:</p>
<pre><code>run { ... } for 5 Cat
run { ... } for 5 Cat, 2 Dog
</code></pre>
<p>The first run will search for instances containing 0--5 cats and 0--4 dogs. The second run will search for instances containing 0--5 cats and 0--2 dogs.</p>
</div>
</div>
<p>Note that this sets an <strong>upper</strong> bound on the size of instances Forge will show you. In other words, Forge will search for instances of size <strong>up to</strong> the bound you specify. If you instead want to set an <strong>exact</strong> bound, you can add the <code>exactly</code> keyword per sig. You may mix and match exact and upper numeric bounds as desired.</p>
<div id="admonition-exact-and-upper-numeric-bounds" class="admonition example">
<div class="admonition-title">
<p>Exact and upper numeric bounds</p>
<p><a class="admonition-anchor-link" href="#admonition-exact-and-upper-numeric-bounds"></a></p>
</div>
<div>
<pre><code>run { ... } for exactly 5 Cat
run { ... } for exactly 5 Cat, 2 Dog
</code></pre>
<p>The first run will search for instances containing exactly 5 cats and 0--4 dogs. The second run will search for instances contsaining exactly 5 cats and 0--2 dogs.</p>
</div>
</div>
<div id="admonition-two-important-exceptions" class="admonition warning">
<div class="admonition-title">
<p>Two Important Exceptions</p>
<p><a class="admonition-anchor-link" href="#admonition-two-important-exceptions"></a></p>
</div>
<div>
<p>Although a numeric bound without <code>exact</code> generally means anything <strong>up to</strong> that bound, there are two important exceptions to this rule:</p>
<p>(1) The set of available integers is always fixed exactly by the bitwidth. E.g., <code>3 Int</code> corresponds to the 8 integers in the range -4 through 3 (inclusive). </p>
<p>(2) If the <code>&lt;field&gt; is linear</code> annotation is present, the <code>sig</code> to which the field belongs will become exact-bounded, even if you have not written <code>exactly</code> in the numeric bound.</p>
</div>
</div>
<h2 id="instance-bounds"><a class="header" href="#instance-bounds">Instance bounds</a></h2>
<p>Instance bounds allow you to encode specific partial instances that you want Forge to run on. When creating an instance bound, you give upper and lower bounds in terms of concrete objects, not numeric sizes. This allows you to test your predicates on a specific instance, which can be convenient (see <a href="../testing-chapter/testing.html#examples">Examples</a>). It is also useful for optimization in some cases (see <a href="./concrete-instance-bounds.html#instances">Partial Instances</a>, which use the same bounds syntax as examples). </p>
<div id="admonition-a-partial-instance" class="admonition example">
<div class="admonition-title">
<p>A partial instance</p>
<p><a class="admonition-anchor-link" href="#admonition-a-partial-instance"></a></p>
</div>
<div>
<p>If we have defined a single sig with a single field:</p>
<pre><code>sig Person {
    spouse: lone Person
}
</code></pre>
<p>then this <code>inst</code> describes an instance for our model:</p>
<pre><code>inst exampleInstance {
    Person = `Person0 + `Person1 + `Person2
    spouse = `Person0 -&gt; `Person1 + `Person1 + `Person0
}
</code></pre>
<p>Similarly, we could write an example using the same syntax (assuming that <code>marriageRules</code> is defined as a predicate):</p>
<pre><code>example myExample is {marriageRules} for {
    Person = `Person0 + `Person1 + `Person2
    spouse = `Person0 -&gt; `Person1 + `Person1 + `Person0
}
</code></pre>
</div>
</div>
<p>Note that Forge expects concrete object names to be prefixed with a backquote; this is mandatory, and used to distinguish object names (which only make sense in the context of an instance or instances) from sigs, fields, predicates, and other kinds of identifiers that make sense in arbitrary formulas. </p>
<p>Instances defined via <code>inst</code> can be used in <code>run</code>, <code>assert</code>, etc. and may be combined with numeric bounds, provided they are consistent. Bounds annotations, such as <code>is linear</code>, can be included in instance bounds as well. See the <a href="./concrete-instance-bounds.html">Concrete Instances</a> section for more information about writing instance bounds.</p>
<div id="admonition-using-instance-bounds" class="admonition example">
<div class="admonition-title">
<p>Using Instance Bounds</p>
<p><a class="admonition-anchor-link" href="#admonition-using-instance-bounds"></a></p>
</div>
<div>
<p>You may give the entire instance bound verbatim:</p>
<pre><code>run {} for 3 Int for {
    Person = `Person0 + `Person1 + `Person2
    spouse = `Person0 -&gt; `Person1 + `Person1 + `Person0
}
</code></pre>
<p>or you may use the instance name directly:</p>
<pre><code>run {} for 3 Int for exampleInstance
</code></pre>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../running-models/sterling-visualizer.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../running-models/concrete-instance-bounds.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../running-models/sterling-visualizer.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../running-models/concrete-instance-bounds.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
