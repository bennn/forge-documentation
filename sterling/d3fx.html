<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>D3FX Helpers - Forge Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../././mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../home.html">Home</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting Started</li><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded affix "><li class="part-title">Building Models</li><li class="chapter-item expanded "><a href="../building-models/overview.html"><strong aria-hidden="true">2.</strong> Overview</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/alloy-user-overview.html"><strong aria-hidden="true">2.1.</strong> Addendum for Alloy Users</a></li></ol></li><li class="chapter-item expanded "><a href="../building-models/sigs/sigs.html"><strong aria-hidden="true">3.</strong> Sigs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/sigs/inheritance.html"><strong aria-hidden="true">3.1.</strong> Inheritance</a></li><li class="chapter-item expanded "><a href="../building-models/sigs/singleton-maybe-sigs.html"><strong aria-hidden="true">3.2.</strong> Singleton, Maybe, and Abstract Sigs</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.</strong> Field Multiplicity</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.4.</strong> Field Types</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.5.</strong> Advanced</div></li></ol></li><li class="chapter-item expanded "><a href="../building-models/constraints/constraints.html"><strong aria-hidden="true">4.</strong> Constraints</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/formulas.html"><strong aria-hidden="true">4.1.</strong> Formulas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/operators.html"><strong aria-hidden="true">4.1.1.</strong> Operators</a></li><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/cardinality-membership.html"><strong aria-hidden="true">4.1.2.</strong> Cardinality and Membership</a></li><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/quantifiers.html"><strong aria-hidden="true">4.1.3.</strong> Quantifiers</a></li><li class="chapter-item expanded "><a href="../building-models/constraints/formulas/predicates.html"><strong aria-hidden="true">4.1.4.</strong> Predicates</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.</strong> Expressions</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.</strong> Relational Expressions</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.1.</strong> Relational Join</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.2.</strong> Cross Product</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.3.</strong> Transpose</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.4.</strong> Transitive Closure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.1.5.</strong> Reflexive Transitive Closure</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.2.2.</strong> Functions</div></li><li class="chapter-item expanded "><a href="../building-models/constraints/expressions/let-expressions.html"><strong aria-hidden="true">4.2.3.</strong> Let-Expressions</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../building-models/comments.html"><strong aria-hidden="true">5.</strong> Comments</a></li><li class="chapter-item expanded affix "><li class="part-title">Running Models</li><li class="chapter-item expanded "><a href="../running-models/running.html"><strong aria-hidden="true">6.</strong> Running</a></li><li class="chapter-item expanded "><a href="../running-models/sterling-visualizer.html"><strong aria-hidden="true">7.</strong> Sterling Visualizer</a></li><li class="chapter-item expanded "><a href="../running-models/bounds.html"><strong aria-hidden="true">8.</strong> Bounds</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../running-models/concrete-instance-bounds.html"><strong aria-hidden="true">8.1.</strong> Concrete Instance Bounds</a></li></ol></li><li class="chapter-item expanded "><a href="../running-models/options.html"><strong aria-hidden="true">9.</strong> Options</a></li><li class="chapter-item expanded affix "><li class="part-title">Testing</li><li class="chapter-item expanded "><a href="../testing-chapter/testing.html"><strong aria-hidden="true">10.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../testing-chapter/wheats.html"><strong aria-hidden="true">11.</strong> Testing Against Wheats</a></li><li class="chapter-item expanded affix "><li class="part-title">Forge Standard Library (Built-Ins)</li><li class="chapter-item expanded "><a href="../forge-standard-library/integers.html"><strong aria-hidden="true">12.</strong> Integers</a></li><li class="chapter-item expanded "><a href="../forge-standard-library/constants-and-keywords.html"><strong aria-hidden="true">13.</strong> Constants & Keywords</a></li><li class="chapter-item expanded "><a href="../forge-standard-library/helpers.html"><strong aria-hidden="true">14.</strong> Helpers</a></li><li class="chapter-item expanded affix "><li class="part-title">Custom Visualizations</li><li class="chapter-item expanded "><a href="../sterling/custom-basics.html"><strong aria-hidden="true">15.</strong> Custom Visualization Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../sterling/d3fx.html" class="active"><strong aria-hidden="true">15.1.</strong> D3FX Helpers</a></li><li class="chapter-item expanded "><a href="../sterling/svg-tips.html"><strong aria-hidden="true">15.2.</strong> Working with SVG and Imports</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Temporal Models (Electrum)</li><li class="chapter-item expanded "><div><strong aria-hidden="true">16.</strong> Electrum Overview</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">17.</strong> Running & Examining Electrum Models</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Forge Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="d3fx-helpers"><a class="header" href="#d3fx-helpers">D3FX Helpers</a></h1>
<h2 id="the-stage-and-visual-objects"><a class="header" href="#the-stage-and-visual-objects">The Stage and Visual Objects</a></h2>
<p>The <code>Stage</code> object is the top-level container for every visual object that gets displayed. You can add further structure to your visual containment using other containers like grids or conjoined objects, but the stage must always be the top-level graphic organizer. You must make exactly one stage, and a stage cannot store other stages. </p>
<p>Visual objects comprise all other objects to display using the helper library. These may be containers for other objects, or atomic objects like text boxes or shapes. You can add new visual objects to a <code>Stage</code> using the <code>.add</code> method. </p>
<h2 id="primitive-objects"><a class="header" href="#primitive-objects">Primitive Objects</a></h2>
<h3 id="textbox"><a class="header" href="#textbox">Textbox</a></h3>
<p>Textboxes render text to the screen at a given location. They use the following syntax: </p>
<pre><code>let text = new Textbox(
&lt;text&gt;:string, &lt;coords&gt;:Coords, &lt;color&gt;:string, &lt;textSize&gt;:string
)
</code></pre>
<p>All parameters after <code>text</code> are optional, and can be edited afterwards with corresponding setter methods. </p>
<h3 id="shapes"><a class="header" href="#shapes">Shapes</a></h3>
<p>The following three objects (<code>Rectangle</code>, <code>Circle</code>, and <code>Polygon</code>) are all instances of <code>Shape</code>. In general, all <code>Shape</code> objects include the following properties, all of which have corresponding setters and are typically optional parameters in the construction of these shapes:</p>
<ul>
<li><code>color: string</code> - This is the color of the interior of the shape.</li>
<li><code>borderWidth: number</code> - This is the width of the border around the exterior of the shape, in pixels. </li>
<li><code>borderColor: string</code> - This is the color of the border of the shape. </li>
<li><code>label: string</code> - This is text to be displayed on top of the shape. All shapes come with an internal <code>TextBox</code> object, which is rendered according to this text in the center of the shape. </li>
<li><code>labelColor: string</code> - The color of the text that is displayed atop the shape. </li>
<li><code>labelSize: number</code> - The size of the label’s font, in pixels. </li>
</ul>
<h4 id="rectangle"><a class="header" href="#rectangle">Rectangle</a></h4>
<p>Rectangles work how one would expect them to. Along with the rest of the <code>Shape</code> variables, they also take in values of coordinates, height, and width. The coordinates will be in the typical form of the interface <code>{x:&lt;x position&gt;, y:&lt;y position&gt;}</code>. These coordinates will be the top left of the rectangle. The width and height parameters determine the size of the rectangle in the x and y direction, respectively.</p>
<h4 id="circle"><a class="header" href="#circle">Circle</a></h4>
<p>Circles take in all the optional parameters associated with shapes, along with the additional parameters of <code>coords</code> and <code>radius</code>. The x and y values contained in the <code>coords</code> will determine the center of the circle, around which the <code>radius</code> will determine the rest. </p>
<h4 id="polygon"><a class="header" href="#polygon">Polygon</a></h4>
<p>Polygons are a bit more complicated, and serve as a very general tool. Along with the standard optional shape parameters, they also take in a <code>points</code> parameter. This is in the form of an array of coordinates. Each coordinate should be a point on the outside of the polygon, traversing the outside of the desired shape in order. </p>
<div id="admonition-a-simple-triangle" class="admonition example">
<div class="admonition-title">
<p>A simple triangle</p>
<p><a class="admonition-anchor-link" href="#admonition-a-simple-triangle"></a></p>
</div>
<div>
<p>For example, a simple triangle could be rendered as follows:</p>
<pre><code>let points = [
    {x: 100, y:100},
    {x:100, y:200},
    {x:200, y:100}
]

let poly = new Polygon(
    points, &quot;red&quot;
)
</code></pre>
</div>
</div>
<h4 id="line"><a class="header" href="#line">Line</a></h4>
<p><code>Line</code>s work similar to <code>Polygon</code>s, however without an interior. They also take in an array of coordinates called <code>points</code>, however these points will form a line, and will not reconnect at the end. </p>
<h2 id="complex-objects"><a class="header" href="#complex-objects">Complex Objects</a></h2>
<h3 id="grids"><a class="header" href="#grids">Grids</a></h3>
<p>A <code>Grid</code> provides a 2-dimensional array of cells that can store other visual objects. It is initialized by passing an object containing the following fields to its constructor:</p>
<ul>
<li>the location of the upper-left corner of the grid: <code>grid_location: {x: upper-left-x-coordinate, y: upper-left-y-coordinate}</code>;</li>
<li>the size of each cell: <code>cell_size: {x_size: width-per-cell, y_size: height_per_cell}</code>; and </li>
<li>the number of rows and columns: <code>grid_dimensions: {x_size: number-of-columns, y_size: number-of-rows}</code>.</li>
</ul>
<p>Add a visual object <code>obj</code> to a grid using its <code>.add</code> method:</p>
<ul>
<li><code>grid.add({x:column-index,y:row-index},obj)</code></li>
</ul>
<div id="admonition-cleaning-up-the-array" class="admonition example">
<div class="admonition-title">
<p>Cleaning Up the Array</p>
<p><a class="admonition-anchor-link" href="#admonition-cleaning-up-the-array"></a></p>
</div>
<div>
<p>In the <a href="./custom-basics.html">custom viz basics</a> chapter, we built a simple script that printed out the contents of an array (for a model that defined such). Let's create a grid that displays the array contents more readably. We'll get the contents of the array as before, but this time we'll create a new text box for every entry, and store each in the grid.</p>
<pre><code>const stage = new Stage()
const theArray = instance.signature('IntArray').atoms()[0]
const elementsField = instance.field('elements')
const entries = theArray.join(elementsField)

const arrayGrid = new Grid({
    grid_location: {x: 50, y: 50},
    cell_size: {x_size: 80, y_size: 40},
    grid_dimensions: {x_size:1, y_size:10}})

entries.tuples().forEach( (entry,idx) =&gt; {
  arrayGrid.add({x: 0, y: idx}, 
           new TextBox(`${entry}`, {x:100, y:100},'black',16))
})

stage.add(arrayGrid)
stage.render(svg, document)
</code></pre>
<p>Note the call to <code>entries.tuples()</code>. The variable <code>entries</code> references a Forge expression---a piece of syntax that means something in the instance. To get that meaning into a list we can iterate over, we call the <code>tuples()</code> method.</p>
<p>There's one problem remaining: we are creating a grid that always has 10 rows in it, no matter how many entries there are in the array. To fix this, we'll use <code>entries.tuples().length</code> in the grid definition: <code>grid_dimensions: {x_size:1, y_size:entries.tuples().length}</code>. Now we'll see a grid without any extra rows.</p>
</div>
</div>
<div id="admonition-other-container-objects" class="admonition info">
<div class="admonition-title">
<p>Other container objects</p>
<p><a class="admonition-anchor-link" href="#admonition-other-container-objects"></a></p>
</div>
<div>
<ul>
<li>graphs</li>
<li>trees
<ul>
<li>edge objects with labels (new feature)</li>
</ul>
</li>
<li>conjoined objects</li>
</ul>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../sterling/custom-basics.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../sterling/svg-tips.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../sterling/custom-basics.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../sterling/svg-tips.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
